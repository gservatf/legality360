# Project Summary
**Legality 360°** is a comprehensive legal management platform designed to streamline interactions between clients and legal professionals. It enhances case management, document sharing, risk assessment, and task management through various modules, including the Client Portal, Analyst Module, and Admin Panel. The platform facilitates collaboration and oversight within legal teams, with recent updates focusing on improving the authentication process and ensuring seamless operation across environments.

# Project Module Description
The project includes several functional modules:
- **Client Portal**: Clients manage cases, interact with analysts, and access documents.
- **Analyst Module**: Analysts track cases, manage tasks, and communicate with clients.
- **Task Management**: A Kanban board for task visualization and management.
- **Collaborator Management**: Clients can invite collaborators and assign tasks.
- **Database Integration**: Utilizes Supabase for backend services, including data management and user authentication.
- **Task Chat**: Chat functionality for individual tasks with message history and file sharing.
- **Admin Panel**: Administrators manage users, roles, permissions, and oversee case management.
- **Professional Panel**: For analysts and lawyers to manage assigned cases and tasks.
- **Client Panel**: For clients to view active cases and tasks.

# Directory Tree
```
shadcn-ui/
├── README.md                # Project overview and setup instructions
├── components.json          # Component metadata
├── eslint.config.js         # ESLint configuration
├── index.html               # Main HTML file
├── package.json             # Project dependencies and scripts
├── postcss.config.js        # PostCSS configuration
├── public/                  # Static assets
│   ├── assets/              # Branding assets
│   │   └── legality-logo.png # Logo for Legality360
│   ├── favicon.svg          # Favicon for the application
│   └── robots.txt           # Robots.txt for search engines
├── src/                     # Source files
│   ├── App.css              # Main stylesheet
│   ├── App.tsx              # Main application component with routing and authentication handling
│   ├── components/          # React components
│   ├── hooks/               # Custom hooks
│   ├── lib/                 # Utility functions and libraries
│   ├── pages/               # Application pages
│   ├── types/               # Type definitions
│   ├── auth.ts              # Authentication service with Supabase
│   ├── database.ts          # Database service for profile management and queries
│   ├── middleware.ts        # Middleware for authentication and role-based redirection
│   ├── supabase.ts          # Supabase client configuration and types
│   ├── supabaseClient.ts    # Base client for Supabase, now correctly initialized using import.meta.env
│   ├── supabaseService.ts   # CRUD operations for Supabase entities
│   └── vite-env.d.ts        # Vite environment types
├── tailwind.config.ts       # Tailwind CSS configuration
├── template_config.json     # Configuration for templates
├── todo.md                  # Project to-do list
├── tsconfig.*               # TypeScript configuration files
└── vite.config.ts           # Vite configuration
```

# File Description Inventory
- **README.md**: Contains setup instructions and project details.
- **package.json**: Lists dependencies and scripts for building and running the project.
- **src/**: Contains all source code, including components, hooks, and pages.
- **public/**: Holds static files like images and robots.txt.
- **tailwind.config.ts**: Configuration for Tailwind CSS styling.
- **auth.ts**: Authentication service handling user sessions and profiles with Supabase.
- **database.ts**: Manages profile queries and updates, including admin functionalities.
- **middleware.ts**: Handles authentication and redirects users based on their roles.
- **supabase.ts**: Configuration for Supabase client and database types.
- **supabaseClient.ts**: Client for Supabase operations, now correctly initialized using import.meta.env.
- **supabaseService.ts**: Provides CRUD operations for various entities in Supabase.
- **supabase-migration.sql**: SQL for creating and managing the profiles table and associated policies.
- **README-SUPABASE-SETUP.md**: Documentation for configuring Supabase authentication.
- **MGX-ENVIRONMENT-SETUP.md**: Instructions for setting up environment variables in the MGX platform.

# Technology Stack
- **Frontend**: React, TypeScript, Tailwind CSS
- **Backend**: Supabase (for database and authentication)
- **Build Tool**: Vite
- **Linting**: ESLint

# Usage
To get started with the project:
1. Create a `.env.local` file with the following environment variables:
   ```
   NEXT_PUBLIC_SUPABASE_URL=<Your Supabase URL>
   NEXT_PUBLIC_SUPABASE_ANON_KEY=<Your Supabase Anon Key>
   ```
2. Install dependencies:
   ```bash
   pnpm install
   ```
3. Build the project:
   ```bash
   pnpm run build
   ```
4. Run the project:
   ```bash
   pnpm run dev
   ```
